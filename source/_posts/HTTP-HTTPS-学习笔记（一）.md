---
title: HTTP/HTTPS 学习笔记（一）
date: 2018-11-22 20:43:16
categories:
- 网络
tags:
- 网络
---
## HTTP协议
<!--more-->
### HTTP请求准备
- 浏览器将域名发送给DNS服务器，服务器将域名解析为IP地址。
- 建立TCP连接。
### HTTP构建
- 浏览器发送HTTP请求。请求格式如下
![](Http构建.jpg)
一共有三个部分，分别是**请求行**，**首部字段**，**正文实体**。
#### 请求行
- **方法**：POST,PUT,GET,DELETE....
- **URL**：
- **版本**：协议版本
#### 首部
首部是通过key value的方式存储重要的字段。以下举例说明
- Accept-Charset：客户端可以接受的字符集，防止服务器传过来另外的字符集，导致乱码。
- Content-Type：正文的格式。

高并发场景下的系统，在真正的业务逻辑前需要接入层，拦截静态资源请求。如下
![](缓存拦截.jpg)
- Cache-control : 控制缓存

通过max-age指令判断客户端是接受缓存层的资源还是经请求转发给应用集群。详细关于HTTP的缓存控制可以看一下这篇博客。[HTTP缓存控制](http://imweb.io/topic/5795dcb6fb312541492eda8c)
### HTTP请求发送
HTTP协议是基于TCP协议的，使用的是面向连接的方式发送请求。其发送的和路由转发原理一样。
### HTTP返回的构建
和HTTP构建相似
![](Http返回的构建.jpg)
### HTTP2.0
优化
- 压缩HTTP头，在每次需要携带大量key value的两端建立一个索引表，相同的头只发送索引表中的索引。
- 可以将多个请求分到不同的流中，然后将请求内容拆成帧，进行二进制传输。


### QUIC协议
HTTP协议是基于TCP协议的，在处理包时有严格的顺序。会导致当一个包没有接受到时，必须等待包传输完成才可以进行。
- 自定义连接机制
- 自定义重传机制
- 无阻塞多路复用
- 自定义流量控制
关于QUIC的详细介绍请看这篇博客：[QUIC介绍](https://zhuanlan.zhihu.com/p/32553477)
